/**
 * FingerprintJS Pro v3.7.1 - Copyright (c) FingerprintJS, Inc, 2022 (https://fingerprint.com)
 *
 * This software contains code from open-source projects:
 * MurmurHash3 by Karan Lyons (https://github.com/karanlyons/murmurHash3.js)
 */

import{__rest as e,__assign as t}from"tslib";function r(e){for(var t="",r=0;r<e.length;++r)if(r>0){var n=e[r].toLowerCase();n!==e[r]?t+=" "+n:t+=e[r]}else t+=e[r].toUpperCase();return t}var n="Client timeout",o="Network connection error",i="Network request aborted",R="Response cannot be parsed",a="Blocked by CSP",u=/*#__PURE__*/r("WrongRegion"),s=/*#__PURE__*/r("SubscriptionNotActive"),c=/*#__PURE__*/r("UnsupportedVersion"),d=/*#__PURE__*/r("InstallationMethodRestricted"),l=/*#__PURE__*/r("HostnameRestricted"),E="API key required",_="API key not found",f="API key expired",O="Request cannot be parsed",I="Request failed",p="Request failed to process",v="Too many requests, rate limit exceeded",N="Not available for this origin",h="Not available with restricted header",y="API key required",P="API key not found",m="API key expired";function A(e,t,r){return void 0===r&&(r=0),t(r).catch((function(n){if(r>=e.maxRetries||!e.shouldRetry(n))throw n;var o,i,R,a,u=(o=e.baseDelay,i=e.maxDelay,R=e.baseDelay*Math.pow(2,r),Math.max(o,Math.min(i,R)));return(a=u,new Promise((function(e){return setTimeout(e,a)}))).then((function(){return A(e,t,r+1)}))}))}var T="Failed to load the JS script of the agent",w="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js";function b(r){var n,o,i=r.scriptUrlPattern,R=r.token,a=r.apiKey,u=void 0===a?R:a,s=e(r,["scriptUrlPattern","token","apiKey"]),c=(n=r,o="scriptUrlPattern",Object.prototype.hasOwnProperty.call(n,o)?i:void 0),d=[];return Promise.resolve().then((function(){if(!u||"string"!=typeof u)throw new Error("API key required");return A({maxRetries:5,baseDelay:100,maxDelay:3e3,shouldRetry:function(e){return!(e instanceof Error&&"Blocked by CSP"===e.message)}},(function(){var e,t=new Date,r=function(){return d.push({startedAt:t,finishedAt:new Date})},n=function(e,t,r,n){var o,i=document,R="securitypolicyviolation",a=function(t){var r=new URL(e,location.href),n=t.blockedURI;n!==r.href&&n!==r.protocol.slice(0,-1)&&n!==r.origin||(o=t,u())};i.addEventListener(R,a);var u=function(){return i.removeEventListener(R,a)};return null==n||n.then(u,u),Promise.resolve().then(t).then((function(e){return u(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(u(),o)return r(o);throw e}))}))}(e=function(e,t){void 0===t&&(t=w);var r=encodeURIComponent;return t.replace(/<[^<>]+>/g,(function(t){return"<version>"===t?"3":"<apiKey>"===t?r(e):"<loaderVersion>"===t?r("3.7.1"):t}))}(u,c),(function(){return function(e){return new Promise((function(t,r){var n=document.createElement("script"),o=function(){var e;return null===(e=n.parentNode)||void 0===e?void 0:e.removeChild(n)},i=document.head||document.getElementsByTagName("head")[0];n.onload=function(){o(),t()},n.onerror=function(){o(),r(new Error(T))},n.async=!0,n.src=e,i.appendChild(n)}))}(e)}),(function(){throw new Error("Blocked by CSP")}));return n.then(r,r),n}))})).then((function(){var e=window,r="__fpjs_p_l_b",n=e[r];if(function(e,t){var r,n=null===(r=Object.getOwnPropertyDescriptor)||void 0===r?void 0:r.call(Object,e,t);(null==n?void 0:n.configurable)?delete e[t]:n&&!n.writable||(e[t]=void 0)}(e,r),"function"!=typeof(null==n?void 0:n.load))throw new Error(T);return n.load(t(t({},s),{ldi:{attempts:d}}))}))}var D={load:b,ERROR_SCRIPT_LOAD_FAIL:T,ERROR_API_KEY_EXPIRED:"API key expired",ERROR_API_KEY_INVALID:"API key not found",ERROR_API_KEY_MISSING:"API key required",ERROR_BAD_REQUEST_FORMAT:"Request cannot be parsed",ERROR_BAD_RESPONSE_FORMAT:"Response cannot be parsed",ERROR_CLIENT_TIMEOUT:"Client timeout",ERROR_CSP_BLOCK:"Blocked by CSP",ERROR_FORBIDDEN_ENDPOINT:l,ERROR_FORBIDDEN_HEADER:"Not available with restricted header",ERROR_FORBIDDEN_ORIGIN:"Not available for this origin",ERROR_GENERAL_SERVER_FAILURE:"Request failed",ERROR_INSTALLATION_METHOD_RESTRICTED:d,ERROR_NETWORK_ABORT:"Network request aborted",ERROR_NETWORK_CONNECTION:"Network connection error",ERROR_RATE_LIMIT:"Too many requests, rate limit exceeded",ERROR_SERVER_TIMEOUT:"Request failed to process",ERROR_SUBSCRIPTION_NOT_ACTIVE:s,ERROR_TOKEN_EXPIRED:"API key expired",ERROR_TOKEN_INVALID:"API key not found",ERROR_TOKEN_MISSING:"API key required",ERROR_UNSUPPORTED_VERSION:c,ERROR_WRONG_REGION:u};export{f as ERROR_API_KEY_EXPIRED,_ as ERROR_API_KEY_INVALID,E as ERROR_API_KEY_MISSING,O as ERROR_BAD_REQUEST_FORMAT,R as ERROR_BAD_RESPONSE_FORMAT,n as ERROR_CLIENT_TIMEOUT,a as ERROR_CSP_BLOCK,l as ERROR_FORBIDDEN_ENDPOINT,h as ERROR_FORBIDDEN_HEADER,N as ERROR_FORBIDDEN_ORIGIN,I as ERROR_GENERAL_SERVER_FAILURE,d as ERROR_INSTALLATION_METHOD_RESTRICTED,i as ERROR_NETWORK_ABORT,o as ERROR_NETWORK_CONNECTION,v as ERROR_RATE_LIMIT,T as ERROR_SCRIPT_LOAD_FAIL,p as ERROR_SERVER_TIMEOUT,s as ERROR_SUBSCRIPTION_NOT_ACTIVE,m as ERROR_TOKEN_EXPIRED,P as ERROR_TOKEN_INVALID,y as ERROR_TOKEN_MISSING,c as ERROR_UNSUPPORTED_VERSION,u as ERROR_WRONG_REGION,D as default,b as load};
