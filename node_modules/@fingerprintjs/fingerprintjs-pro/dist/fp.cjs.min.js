/**
 * FingerprintJS Pro v3.7.1 - Copyright (c) FingerprintJS, Inc, 2022 (https://fingerprint.com)
 *
 * This software contains code from open-source projects:
 * MurmurHash3 by Karan Lyons (https://github.com/karanlyons/murmurHash3.js)
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");function t(e){for(var t="",r=0;r<e.length;++r)if(r>0){var R=e[r].toLowerCase();R!==e[r]?t+=" "+R:t+=e[r]}else t+=e[r].toUpperCase();return t}var r=t("WrongRegion"),R=t("SubscriptionNotActive"),o=t("UnsupportedVersion"),n=t("InstallationMethodRestricted"),i=t("HostnameRestricted");function E(e,t,r){return void 0===r&&(r=0),t(r).catch((function(R){if(r>=e.maxRetries||!e.shouldRetry(R))throw R;var o,n,i,_,s=(o=e.baseDelay,n=e.maxDelay,i=e.baseDelay*Math.pow(2,r),Math.max(o,Math.min(n,i)));return(_=s,new Promise((function(e){return setTimeout(e,_)}))).then((function(){return E(e,t,r+1)}))}))}var _="Failed to load the JS script of the agent",s="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js";function a(t){var r,R,o=t.scriptUrlPattern,n=t.token,i=t.apiKey,a=void 0===i?n:i,O=e.__rest(t,["scriptUrlPattern","token","apiKey"]),u=(r=t,R="scriptUrlPattern",Object.prototype.hasOwnProperty.call(r,R)?o:void 0),I=[];return Promise.resolve().then((function(){if(!a||"string"!=typeof a)throw new Error("API key required");return E({maxRetries:5,baseDelay:100,maxDelay:3e3,shouldRetry:function(e){return!(e instanceof Error&&"Blocked by CSP"===e.message)}},(function(){var e,t=new Date,r=function(){return I.push({startedAt:t,finishedAt:new Date})},R=function(e,t,r,R){var o,n=document,i="securitypolicyviolation",E=function(t){var r=new URL(e,location.href),R=t.blockedURI;R!==r.href&&R!==r.protocol.slice(0,-1)&&R!==r.origin||(o=t,_())};n.addEventListener(i,E);var _=function(){return n.removeEventListener(i,E)};return null==R||R.then(_,_),Promise.resolve().then(t).then((function(e){return _(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(_(),o)return r(o);throw e}))}))}(e=function(e,t){void 0===t&&(t=s);var r=encodeURIComponent;return t.replace(/<[^<>]+>/g,(function(t){return"<version>"===t?"3":"<apiKey>"===t?r(e):"<loaderVersion>"===t?r("3.7.1"):t}))}(a,u),(function(){return function(e){return new Promise((function(t,r){var R=document.createElement("script"),o=function(){var e;return null===(e=R.parentNode)||void 0===e?void 0:e.removeChild(R)},n=document.head||document.getElementsByTagName("head")[0];R.onload=function(){o(),t()},R.onerror=function(){o(),r(new Error(_))},R.async=!0,R.src=e,n.appendChild(R)}))}(e)}),(function(){throw new Error("Blocked by CSP")}));return R.then(r,r),R}))})).then((function(){var t=window,r="__fpjs_p_l_b",R=t[r];if(function(e,t){var r,R=null===(r=Object.getOwnPropertyDescriptor)||void 0===r?void 0:r.call(Object,e,t);(null==R?void 0:R.configurable)?delete e[t]:R&&!R.writable||(e[t]=void 0)}(t,r),"function"!=typeof(null==R?void 0:R.load))throw new Error(_);return R.load(e.__assign(e.__assign({},O),{ldi:{attempts:I}}))}))}var O={load:a,ERROR_SCRIPT_LOAD_FAIL:_,ERROR_API_KEY_EXPIRED:"API key expired",ERROR_API_KEY_INVALID:"API key not found",ERROR_API_KEY_MISSING:"API key required",ERROR_BAD_REQUEST_FORMAT:"Request cannot be parsed",ERROR_BAD_RESPONSE_FORMAT:"Response cannot be parsed",ERROR_CLIENT_TIMEOUT:"Client timeout",ERROR_CSP_BLOCK:"Blocked by CSP",ERROR_FORBIDDEN_ENDPOINT:i,ERROR_FORBIDDEN_HEADER:"Not available with restricted header",ERROR_FORBIDDEN_ORIGIN:"Not available for this origin",ERROR_GENERAL_SERVER_FAILURE:"Request failed",ERROR_INSTALLATION_METHOD_RESTRICTED:n,ERROR_NETWORK_ABORT:"Network request aborted",ERROR_NETWORK_CONNECTION:"Network connection error",ERROR_RATE_LIMIT:"Too many requests, rate limit exceeded",ERROR_SERVER_TIMEOUT:"Request failed to process",ERROR_SUBSCRIPTION_NOT_ACTIVE:R,ERROR_TOKEN_EXPIRED:"API key expired",ERROR_TOKEN_INVALID:"API key not found",ERROR_TOKEN_MISSING:"API key required",ERROR_UNSUPPORTED_VERSION:o,ERROR_WRONG_REGION:r};exports.ERROR_API_KEY_EXPIRED="API key expired",exports.ERROR_API_KEY_INVALID="API key not found",exports.ERROR_API_KEY_MISSING="API key required",exports.ERROR_BAD_REQUEST_FORMAT="Request cannot be parsed",exports.ERROR_BAD_RESPONSE_FORMAT="Response cannot be parsed",exports.ERROR_CLIENT_TIMEOUT="Client timeout",exports.ERROR_CSP_BLOCK="Blocked by CSP",exports.ERROR_FORBIDDEN_ENDPOINT=i,exports.ERROR_FORBIDDEN_HEADER="Not available with restricted header",exports.ERROR_FORBIDDEN_ORIGIN="Not available for this origin",exports.ERROR_GENERAL_SERVER_FAILURE="Request failed",exports.ERROR_INSTALLATION_METHOD_RESTRICTED=n,exports.ERROR_NETWORK_ABORT="Network request aborted",exports.ERROR_NETWORK_CONNECTION="Network connection error",exports.ERROR_RATE_LIMIT="Too many requests, rate limit exceeded",exports.ERROR_SCRIPT_LOAD_FAIL=_,exports.ERROR_SERVER_TIMEOUT="Request failed to process",exports.ERROR_SUBSCRIPTION_NOT_ACTIVE=R,exports.ERROR_TOKEN_EXPIRED="API key expired",exports.ERROR_TOKEN_INVALID="API key not found",exports.ERROR_TOKEN_MISSING="API key required",exports.ERROR_UNSUPPORTED_VERSION=o,exports.ERROR_WRONG_REGION=r,exports.default=O,exports.load=a;
